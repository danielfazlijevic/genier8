#!/bin/bash

if [[ $1 == create ]]; then
        curl -X POST -H "Content-Type: application/json" -d '{ "tmpl": "\n<style>\n body {\n font-size: 0.9rem; padding-bottom: 10px;\n }\n .logo {\n height: 60px;\n padding: 5px 0 10px 0;\n }\n .w-1-3 {\n width: 33.3333333%;\n }\n .w-2-3 {\n width: 66.666666%;\n }\n .w-1-5 {\n width: 20%;\n }\n .signition {\n position: absolute;\n bottom: 10px;\n right: 10px;\n }\n .w-1-2 {\n width: 50%;\n }\n .text-end {\n text-align: end;\n }\n .text-center {\n text-align: center;\n }\n</style>\n<body>\n <div class=\"logo\">\n <img\n style=\"height: 100%;\"\n src=\"http://desk.dev.4bees.io/logo.png\"\n alt=\"Desk & More\"\n />\n </div>\n <div>\n <div>{{ deskAddr }}</div>\n <div>Telefon: {{ deskPhone }}</div>\n <div>Matični broj: {{ deskPIN }}</div>\n <div>PIB: {{ deskVIN }}</div>\n <div>Tekući račun: {{ deskBankAccount }}</div>\n </div>\n <div style=\"margin-top: 2em; font-weight: bold;\">\n Maloprodajni objekat: Desk&More<br />\n {{ preInvoiceLocation }}\n </div>\n <div style=\"margin-top: 2em; font-weight: bold;\">\n {{ dateAndPlace }}\n </div>\n <div style=\"margin-top: 2em;\">\n <h2 style=\"text-align: center;\">\n PREDRAČUN {{ preInvoiceNumber }}\n </h2>\n </div>\n <div>\n <div>Naziv klijenta: {{ clientName }}</div>\n <div>Adresa klijenta: {{ clientAddress}}</div>\n <div>MB: {{ clientPIN }}</div>\n <div>PIB: {{ clientVIN }}</div>\n </div>\n\n <!-- Tabela -->\n <div>\n <!-- Header -->\n <div style=\"width: 100%;\">\n <div style=\"display: flex;\" class=\"text-center\">\n <div class=\"w-1-3\">\n <div style=\"font-weight: bold; text-align: center;\">\n Opis\n </div>\n </div>\n <div\n class=\"w-2-3\"\n style=\"\n font-weight: bold;\n text-align: center;\n display: flex;\n \"\n >\n <div class=\"w-1-5\">\n Broj dana\n </div>\n <div class=\"w-1-5\">\n Osnovica\n </div>\n <div class=\"w-1-5\">\n PDV\n </div>\n <div class=\"w-1-5\">\n Iznos PDV-a\n </div>\n <div class=\"w-1-5\">\n Iznos sa PDV-om\n </div>\n </div>\n </div>\n <!-- BODY -->\n {{#each preInvoiceRows}}\n <div style=\"width: 100%;t\" class=\"text-center\">\n <div style=\"display: flex;\">\n <div class=\"w-1-3\">\n <div style=\"text-align: start;\">\n {{this.description}}\n </div>\n </div>\n <div\n class=\"w-2-3 text-center\"\n style=\"text-align: center; display: flex;\"\n >\n <div class=\"w-1-5\">\n {{this.numberOfDays}}\n </div>\n <div class=\"w-1-5\">\n {{this.taxBase}}\n </div>\n <div class=\"w-1-5\">\n {{this.taxRate}}\n </div>\n <div class=\"w-1-5\">\n {{this.taxAmount}}\n </div>\n <div class=\"w-1-5\">\n {{this.totalWithTaxation}}\n </div>\n </div>\n </div>\n </div>\n {{/each}}\n </div>\n </div>\n\n <div style=\"width: 100%; margin-top: 2em;\">\n <div class=\"text-center\" style=\"display: flex;\">\n <div class=\"w-1-3 text-center\">\n <h3>UKUPNO ZA UPLATU RSD</h3>\n </div>\n <div class=\"w-2-3\">\n <div style=\"display: flex;\">\n <div class=\"w-1-5\"></div>\n <div class=\"w-1-5\">\n <h3>{{taxBase}}</h3>\n </div>\n <div class=\"w-1-5\"></div>\n <div class=\"w-1-5\">\n <h3>{{taxAmount}}</h3>\n </div>\n <div class=\"w-1-5\">\n <h3>{{totalWithTaxation}}</h3>\n </div>\n </div>\n </div>\n </div>\n </div>\n\n <div style=\"margin-top: 3em;\">\n <div>Napomena o poreskom oslobodjenju: {{ taxNote }}</div>\n <div>\n {{ paymentText }}\n </div>\n </div>\n\n <div class=\"signition\">\n <div>Za {{ footerFor }}</div>\n <div>Obradila: {{ creatorName }}</div>\n </div>\n</body>\n", "params": {"deskAddr":"whatever","deskPhone":"whatever","deskPIN":"whatever","deskPIB":"whatever","deskBankAccount":"whatever","preInvoiceLocation":"Kod Vuka","dateAndPlace":"somewhere","preInvoiceNumber":"002-2012","clientName":"Klijent name","clientAddress":"osajfpao","clientPIN":"123123","clientVIN":"123123123","preInvoiceRows":[{"description":"Desc","numberOfDays":"1","priceWithTaxation":"20","taxBase":"1","taxRate":"20%","taxAmount":"4","totalWithTaxation":"25"}],"taxBase":"4","taxAmount":"40","totalWidthTaxation":"20","taxNote":"woow","paymentText":"1212","footerFor":"123#","creatorName":"Nikola Jokic"}, "name": "PRE-INVOICE"}' '159.89.15.98:3000/template?email=jokicnikola07@gmail.com'
elif [[ $1 == generate ]]; then
    curl -X POST -H "Content-Type: application/json" -d '{"params" : { "deskAddr" : "whatever", "deskPhone" : "whatever", "deskPIN" : "whatever", "deskVIN" : "whatever", "deskBankAccount" : "whatever", "preInvoiceLocation" : "Kod Vuka", "dateAndPlace" : "somewhere", "preInvoiceNumber" : "002-2012", "clientName" : "Klijent name", "clientAddress" : "osajfpao", "clientPIN" : "123123", "clientVIN" : "123123123", "preInvoiceRows" : [ { "description" : "Desc", "numberOfDays" : "1", "priceWithTaxation" : "20", "taxBase" : "1", "taxRate" : "20%", "taxAmount" : "4", "totalWithTaxation" : "25" } ], "taxBase" : "4", "taxAmount" : "40", "totalWithTaxation" : "20", "taxNote" : "woow", "paymentText" : "1212", "footerFor" : "123#", "creatorName" : "Nikola Jokic" }}' 159.89.15.98:3000/template/602bded28dedb21ed3856155/generate > out.pdf
fi
